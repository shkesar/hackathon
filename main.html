<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" charset="utf-8"></script>
    </head>
    <body>
        <script>
        var customers, invoices;
        var count = 0;
        var self = this;

        $.get("invoice.json", function( data ) {
            self.invoices = JSON.parse(data);
            $.get("customer.json", function( data ) {
                self.customers = JSON.parse(data);

                for (i = 0; i < self.customers.length; i++) {
                    var customer = self.customers[i];
                    // var ba = customer['BillAddress'];
                    var listId = customer['ListID'];
                    var _invoices = [];
                    for (j = 0; j < self.invoices.length; j++) {
                        var invoice = self.invoices[j];
                        var cr = invoice['CustomerRef'];
                        var _listId = cr['ListID'];
                        if (listId == _listId /*&& pc == _pc*/) {
                            _invoices.push(invoice);
                        }
                    }
                    customer['invoices'] = _invoices;
                    if (_invoices.length > 0) { self.count++; }
                }
                console.log(self.count);
                debugger
            });
        });
        </script>
    </body>
</html>
